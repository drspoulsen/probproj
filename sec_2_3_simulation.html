<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Simulation</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="The Probability Project">
<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script><script>var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    tags: "none",
    tagSide: "right",
    tagIndent: ".8em",
    packages: {'[+]': ['base', 'extpfeil', 'ams', 'amscd', 'newcommand', 'knowl']}
  },
  options: {
    ignoreHtmlClass: "tex2jax_ignore|ignore-math",
    processHtmlClass: "process-math",
    renderActions: {
        findScript: [10, function (doc) {
            document.querySelectorAll('script[type^="math/tex"]').forEach(function(node) {
                var display = !!node.type.match(/; *mode=display/);
                var math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                var text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = {node: text, delim: '', n: 0};
                math.end = {node: text, delim: '', n: 0};
                doc.math.push(math);
            });
        }, '']
    },
  },
  chtml: {
    scale: 0.88,
    mtextInheritFont: true
  },
  loader: {
    load: ['input/asciimath', '[tex]/extpfeil', '[tex]/amscd', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],
    paths: {pretext: "https://pretextbook.org/js/lib"},
  },
  startup: {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
},
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script>// Make *any* pre with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({inputLocation: 'pre.sagecell-sage',
                       linked: true,
                       languages: ['sage'],
                       evalButtonText: 'Evaluate (Sage)'});
</script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.13/pretext.js"></script><script>miniversion=0.674</script><script src="https://pretextbook.org/js/0.13/pretext_add_on.js?x=1"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/colors_blue_red.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/setcolors.css" rel="stylesheet" type="text/css">
</head>
<body class="pretext-book ignore-math has-toc has-sidebar-left">
<a class="assistive" href="#content">Skip to main content</a><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\N}{\mathbb N}
\newcommand{\Z}{\mathbb Z}
\newcommand{\Q}{\mathbb Q}
\newcommand{\R}{\mathbb R}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<header id="masthead" class="smallbuttons"><div class="banner"><div class="container">
<a id="logo-link" href=""></a><div class="title-container">
<h1 class="heading"><a href="probproj.html"><span class="title">The Probability Project:</span> <span class="subtitle">A textbook by students, for students</span></a></h1>
<p class="byline"></p>
</div>
</div></div>
<nav id="primary-navbar" class="navbar"><div class="container">
<div class="navbar-top-buttons">
<button class="sidebar-left-toggle-button button active" aria-label="Show or hide table of contents sidebar">Contents</button><div class="tree-nav toolbar toolbar-divisor-3"><span class="threebuttons"><a id="previousbutton" class="previous-button toolbar-item button" href="ch_2_probability_basics.html" title="Previous">Prev</a><a id="upbutton" class="up-button button toolbar-item" href="ch_2_probability_basics.html" title="Up">Up</a><span id="nextbutton" class="next-button button toolbar-item disabled">Next</span></span></div>
</div>
<div class="navbar-bottom-buttons toolbar toolbar-divisor-4">
<button class="sidebar-left-toggle-button button toolbar-item active">Contents</button><a class="previous-button toolbar-item button" href="ch_2_probability_basics.html" title="Previous">Prev</a><a class="up-button button toolbar-item" href="ch_2_probability_basics.html" title="Up">Up</a><span class="next-button button toolbar-item disabled">Next</span>
</div>
</div></nav></header><div class="page">
<div id="sidebar-left" class="sidebar" role="navigation"><div class="sidebar-content">
<nav id="toc"><ul>
<li class="link">
<a href="ch_1_combinatorics.html" data-scroll="ch_1_combinatorics" class="internal"><span class="codenumber">1</span> <span class="title">Combinatorics</span></a><ul>
<li><a href="sec_1_1_multiplication.html" data-scroll="sec_1_1_multiplication" class="internal">Multiplication Principle</a></li>
<li><a href="sec_1_2_permutations.html" data-scroll="sec_1_2_permutations" class="internal">Permutations</a></li>
<li><a href="sec_1_3_combinations.html" data-scroll="sec_1_3_combinations" class="internal">Combinations</a></li>
</ul>
</li>
<li class="link">
<a href="ch_2_probability_basics.html" data-scroll="ch_2_probability_basics" class="internal"><span class="codenumber">2</span> <span class="title">Probability Basics</span></a><ul><li><a href="sec_2_3_simulation.html" data-scroll="sec_2_3_simulation" class="active">Simulation</a></li></ul>
</li>
</ul></nav><div class="extras"><nav><a class="pretext-link" href="https://pretextbook.org">Authored in PreTeXt</a><a href="https://www.mathjax.org"><img title="Powered by MathJax" src="https://www.mathjax.org/badge/badge.gif" alt="Powered by MathJax"></a></nav></div>
</div></div>
<main class="main"><div id="content" class="pretext-content"><section class="section" id="sec_2_3_simulation"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">2.1</span> <span class="title">Simulation</span>
</h2>
<section class="introduction" id="introduction-9"><p id="p-69">So far, we have been able to calculate probabilities in two ways. The first is counting the size of an event, and dividing by the size of the sample space, under the assumption that each singleton event is equally likely. The second is to argue from the axioms of theorems of probability. Sometimes, it can be difficult, if not impossible, to calculate a probability using the the aforementioned techniques. Also, for students and experts alike, mistakes in calculating a probability can easily occur. Being able to arrive at an approximation of a probability by running experiments is an essential tool for analyzing probabilities.</p>
<p id="p-70">A simulation can be done without a computer. For example, if you want to know the probability seeing at least one five when you roll four six-sided dice simultaneously, you could roll four dice many times, and count the number of times you see a five on at least one dice. An estimate for the probability will be the number of times you see at least one five divided by the number of times you rolled the four dice. If the mathematical model of probability matches our collective intuition of what probability is, then we should expect that as the number of rolls of four dice gets larger and larger, the estimated probability should approach the "true" probability.</p>
<p id="p-71">That said, the idea of taking a day or two to just roll dice sounds a little tedious. Instead, we will have a computer roll the dice for us, so to speak. Let's just say getting computers to generate numbers that behave like random rolls of the dice has been studied and engineered, so we will just take advantage of that.</p>
<p id="p-72">For our work, we will use Sage, which is an open-source computer algebra system. In the online version of this book, you can execute and manipulate the code live.</p></section><section class="section" id="sec_2_3_tutorial"><h3 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">2.1.1</span> <span class="title">Sage Tutorial</span>
</h3>
<p id="p-73">A general outline of the simulation process is as follows:</p>
<ol class="decimal">
<li id="li-1"><p id="p-derived-li-1">Create a list of random numbers</p></li>
<li id="li-2"><p id="p-derived-li-2">Apply a function or functions to the list to answer whether the experiment is a success (return 1) or a failure (return 0)</p></li>
<li id="li-3"><p id="p-derived-li-3">Once you can successfully run one trial of an experiment, run the experiment many times, recording the numbers of successes and failures to calculate the estimated probability</p></li>
<li id="li-4"><p id="p-derived-li-4">To go above and beyond, estimate the probability many times to get a sense of how much each estimate varies from simulation to simulation</p></li>
</ol>
<p id="p-74">In the following examples, we will see this process in action and introduce some useful functions in Sage that can help us to simulate probabilities.</p>
<article class="example example-like" id="example_sim_rolling_a_five"><a href="" data-knowl="" class="id-ref example-knowl original" data-refid="hk-example_sim_rolling_a_five"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">2.1.1</span><span class="period">.</span><span class="space"> </span><span class="title">Probability of Rolling a Five.</span>
</h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-example_sim_rolling_a_five"><article class="example example-like"><p id="p-75">What is the probability of rolling a five on a six-sided dice? We know that the answer is 1/6, but can we get the computer to arrive at this result? To do this, we will roll a lot of virtual dice! Note, Sage counts from 0, so our "computer dice" has numbers 0,1,2,3,4,5 instead of 1,2,3,4,5,6. We will correct for this by adding one to each random number.</p>
<p id="p-76">Let's begin by rolling just once dice. The following code rolls one six-sided "computer dice." It does this by defining a function called roll_d6(). This function, when called, generates a number between zero and five via the randrange(5) command, then adds one to get a number between one and six. The thrid line calls the function, effectively rolling the "computer dice."  In the online version of the text, execute the command below multiple times and see that the output can change.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-1"><script type="text/x-sage">def roll_d6():
     return randrange(6)+1
roll_d6()
</script></pre>
<p id="p-77">We can take this a step further. Why roll one dice when we can roll many at once? This is step one of the simulation process. The following notation gives a list (named rolls) of 100 six-sided dice rolls.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-2"><script type="text/x-sage">def roll_d6():
     return randrange(6)+1
rolls=[roll_d6() for i in range(100)]
rolls
</script></pre>
<p id="p-78">Before we move on, see if you can modify the above code to roll 50 20-sided dice.</p>
<p id="p-79">So far, we have been able to roll many dice, but we still don't know the probability of rolling a five. We need a function that will tell us when we've rolled a five (success), and when we haven't (failure). This is step two of the simulation process. By assigning the value one to success and the value zero to failure, we can count the number of successes by adding up the numbers in the list! We define this function next. Test it to make sure it behaves as expected.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-3"><script type="text/x-sage">def is_five(x):
  if x==5:
    return 1
  else:
    return 0
</script></pre>
<p id="p-80">Now, we just need to apply the is_five() function to every element in our list, and add up the list to tell us the total number of successes. This is step three of the simulation process.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-4"><script type="text/x-sage">num_rolls=100
def is_five(x):
  if x==5:
    return 1
  else:
    return 0
def roll_d6():
     return randrange(6)+1
rolls=[roll_d6() for i in range(num_rolls)]
success_list=[is_five(roll) for roll in rolls]
total_successes=sum(success_list)
estimated_probability=total_successes/num_rolls
estimated_probability
</script></pre>
<p id="p-81">Awesome! We now have a way to estimate the probability of rolling a five on a six-sided dice. Notice that we have a process that can be executed many times (try running the cell above many times and see that the output changes). We could create a <em class="emphasis">function</em> that executes the above process, and run that function many times (we'll do it 50 times)! This is step four of the simulation process.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-5"><script type="text/x-sage">def is_five(x):
  if x==5:
    return 1
  else:
    return 0
def roll_d6():
  return randrange(6)+1
def estimate_probability(num_rolls):
  rolls=[roll_d6() for i in range(num_rolls)]
  success_list=[is_five(roll) for roll in rolls]
  total_successes=sum(success_list)
  estimated_probability=total_successes/num_rolls
  return estimated_probability
estimate_list=[estimate_probability(100) for i in range(50)]
estimate_list
</script></pre> Finally, rather than looking at all the estimates as a list of numbers, we can visualize the list of estimates with a histogram. <pre class="ptx-sagecell hidden-sagecell-sage" id="sage-6"><script type="text/x-sage">def is_five(x):
  if x==5:
    return 1
  else:
    return 0
def roll_d6():
  return randrange(6)+1
def estimate_probability(num_rolls):
  rolls=[roll_d6() for i in range(num_rolls)]
  success_list=[is_five(roll) for roll in rolls]
  total_successes=sum(success_list)
  estimated_probability=total_successes/num_rolls
  return estimated_probability
estimate_list=[estimate_probability(100) for i in range(50)]
histogram(estimate_list)
</script></pre></article></div>
<article class="example example-like" id="example_sim_rolling_a_five_four_rolls"><a href="" data-knowl="" class="id-ref example-knowl original" data-refid="hk-example_sim_rolling_a_five_four_rolls"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">2.1.2</span><span class="period">.</span><span class="space"> </span><span class="title">Probability of Rolling a Five in Four Rolls.</span>
</h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-example_sim_rolling_a_five_four_rolls"><article class="example example-like"><p id="p-82">What is the probability of rolling a five in four rolls of fair dice? We will modify the code from <a href="" class="xref" data-knowl="./knowl/example_sim_rolling_a_five.html" title="Example 2.1.1: Probability of Rolling a Five">ExampleÂ 2.1.1</a> to arrive at an approximation of the answer, all while following the simulation process.</p>
<p id="p-83">Before we write code, let's think about what we ary trying to do. We want to define "success" (return 1) to be that we roll a five in four rolls of fair dice. While "failure" (return 0) is that we do not roll a five in four  rolls of fair dice.</p>
<p id="p-84">The following code rolls four fair "computer dice." This is step one of the simulation process.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-7"><script type="text/x-sage">def roll_d6():
     return randrange(6)+1
rolls=[roll_d6() for i in range(4)]
rolls
</script></pre>
<p id="p-85">We can apply our indicator function is_five to each roll in this list. Then, the sum of the list can be either 0,1,2,3, or 4. If the sum is zero, that must mean there are no fives, which is a failure, while if the sum is positive, it means that at least one roll was a five, which is a success. We can write a function, is_positive(), to help us distinguish success from failure in this case. Run the code below to see the result of an experiment of rolling four dice, and seeing if at least one of the dice is a five. This is step two of the simulation process. Run it several times to see that sometimes the experiment "succeeds" and sometimes the experiment "fails."</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-8"><script type="text/x-sage">def is_five(x):
  if x==5:
    return 1
  else:
    return 0
def is_positive(x):
    if x>0:
      return 1
    else:
      return 0
def roll_d6():
  return randrange(6)+1
rolls=[roll_d6() for i in range(4)]
five_list=[is_five(x) for x in rolls]
is_positive(sum(five_list))
</script></pre>
<p id="p-86">Now, we move to step 3 of the simulation process. The following code let's us run the experiment many times by making the process from the previous code block a function in its own right, then running that function multiple times. The probability estimate is then the number of successes divided by the number of experiments run.</p>
<pre class="ptx-sagecell hidden-sagecell-sage" id="sage-9"><script type="text/x-sage">def is_five(x):
  if x==5:
    return 1
  else:
    return 0
def is_positive(x):
    if x>0:
      return 1
    else:
      return 0
def roll_d6():
  return randrange(6)+1
def perform_experiment():
  rolls=[roll_d6() for i in range(4)]
  five_list=[is_five(x) for x in rolls]
  return is_positive(sum(five_list))
success_list=[perform_experiment() for i in range(100)]
total_successes=sum(success_list)
estimated_probability=total_successes/100
estimated_probability
</script></pre></article></div></section></section></div></main>
</div>
</body>
</html>
